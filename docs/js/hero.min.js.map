{"version":3,"sources":["hero.js"],"names":["window","GIDA","slider_hero","id","opts","NS","CLS_SLIDES","CLS_VISIBLE","CLS_DISPLAY","CLS_VIEW","CLS_PAUSE","OFFSET_VIEW","root","document","getElementById","getElementsByClassName","undefined","effectType","timeDur","timeTran","randomTiming","slides","Array","prototype","slice","call","querySelectorAll","size","length","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","throttle","addEventListener","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","tid","res","set","Promise","r","setTimeout","clear","clearTimeout","TransitionSlide","constructor","tranTime","_size","_sls","_time","i","style","transform","opacity","transition","idx","dir","TransitionScroll","_curIdx","_curIdxPsd","_curPos","_calcPosition","d","tf","shift","Math","floor","curPos","time","pos","t","abs","idxPsd","sizePsd","hs","ceil","rs","j","TransitionFade","pointerEvents","CLS_PIC","CLS_DUAL","CLS_SCROLL","RANDOM_RATE","PictureImage","sl","p","createElement","classList","add","contains","imgs","appendChild","dataset","img","_createImage","imgSrcset","imgSub","imgSubSrcset","src","srcset","getElement","isCur","display","remove","getDuration","doRandom","dt","random","CLS_VIDEO","PictureVideo","vs","v","_initializeVideo","video","s","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","initImages","io","IntersectionObserver","es","e","isIntersecting","rootMargin","observe","tryResizeVideo","finish","onResizeVideo","scroll","isVideo","insertBefore","firstChild","curIdx","stStep","last","getIdxDir","performance","now","step","next","previous"],"mappings":"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","sourcesContent":["/**\n *\n * Gida Slider - Hero (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-07-05\n *\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\n\nwindow.GIDA.slider_hero = function (id, opts) {\n\tconst NS          = 'gida-slider-hero';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_DISPLAY = 'display';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tif (opts === undefined) opts = {};\n\tconst effectType   = opts['effect_type']      ?? 'slide';\n\tconst timeDur      = opts['duration_time']    ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']  ?? 1;  // [second]\n\tconst randomTiming = opts['is_random_timing'] ?? false;\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t *\n\t * Common Functions (JS)\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-30\n\t *\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t});\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t/**\n\t *\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t *\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size      = size;\n\t\t\tthis._sls       = slides;\n\t\t\tthis._time      = tranTime;\n\t\t\tthis._curIdx    = 0;\n\t\t\tthis._curIdxPsd = 0;\n\t\t\tthis._curPos    = this._calcPosition(0, 1);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${this._curPos[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._curPos = this._calcPosition(this._curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = 'translateX(' + 100 * this._curPos[i] + '%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(10).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - this._curIdx;\n\t\t\tif (dir === -1) d = this._curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\tconst tf = (d === 1) ? 'ease' : ((i === 0) ? 'ease-in' : ((i === d - 1) ? 'ease-out' : 'linear'));\n\t\t\t\tthis._curPos = this.shift(this._curPos, dir, this._time / d, tf);\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\tthis._curIdx = idx;\n\t\t}\n\t\n\t\tshift(curPos, dir, time, tf = 'ease') {\n\t\t\tthis._curIdxPsd += dir;\n\t\t\tif (this._sls.length - 1 < this._curIdxPsd) this._curIdxPsd = 0;\n\t\t\tif (this._curIdxPsd < 0) this._curIdxPsd = this._sls.length - 1;\n\t\n\t\t\tconst pos = this._calcPosition(this._curIdxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPos[i] - pos[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${100 * pos[i]}%)`;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst sizePsd = this._sls.length;\n\t\t\tconst pos = new Array(sizePsd);\n\t\t\tpos[idxPsd] = 0;\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((sizePsd - 1) / 2) : Math.floor((sizePsd - 1) / 2);\n\t\t\tconst rs = sizePsd - 1 - hs;\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (sizePsd - 1 < j) j -= sizePsd;\n\t\t\t\tpos[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += sizePsd;\n\t\t\t\tpos[j] = -i;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-28\n\t *\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t *\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](CLS_VIEW);\n\t\t}, { rootMargin: `${OFFSET_VIEW}px 0px` });\n\t\tio.observe(root);\n\n\t\ttransition(0, 0);\n\t});\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx = 0;\n\tlet stStep = null;\n\tlet last   = 0;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) return;\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\treturn {\n\t\tnext           : () => { transition((curIdx === size - 1) ? 0   : (curIdx + 1),  1); },\n\t\tprevious       : () => { transition((curIdx === 0) ? (size - 1) : (curIdx - 1), -1); },\n\t\tonTransitionEnd: (fn) => { onTransitionEnd = fn; }\n\t};\n\n}\n"],"file":"hero.min.js"}