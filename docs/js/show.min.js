"use strict";function gida_slider_show_page(t,s){const e=document.getElementById(t+"-rivet-"+s);e&&e.click()}function gida_slider_show_initialize(t,s){const e="gida-slider-show",i=e+"-frame",n=e+"-slides",a="visible",l="display",o="view",c=t?document.getElementById(t):document.getElementsByClassName(e)[0];if(!c)return;void 0===s&&(s={});const r=s.effect_type??"slide",d=s.duration_time??8,u=s.transition_time??1,h=s.is_random_timing??!1;let f=s.is_background_visible??!0,m=s.is_side_slide_visible??!1;if("scroll"!==r&&(m=!1),m){f=!1;c.querySelector("."+n).style.overflow="visible"}const p=Array.prototype.slice.call(c.querySelectorAll(`.${n} > li`)),_=p.length,g=[];let y=null;const v=[];function L(t,s=(()=>{})){let e,i=null;return{set:()=>new Promise((n=>{e=n,i=setTimeout((async()=>{i=null,await s(),n()}),t)})),clear:()=>{i&&(clearTimeout(i),i=null,e())}}}document.addEventListener("DOMContentLoaded",(()=>{const t="ie11"!==(-1!==window.navigator.userAgent.toLowerCase().indexOf("trident/7"))&&{passive:!0};window.addEventListener("resize",(()=>{for(let t=0;t<v.length;t+=1)v[t]()}),t)}));const w=[];function b(t,s,e){const n=s.getElementsByClassName("gida-slider-show-prev")[0],a=s.getElementsByClassName("gida-slider-show-next")[0];if(1===t)return n&&(n.style.display="none"),void(a&&(a.style.display="none"));const l=async()=>{await e(null,-1)},o=async()=>{await e(null,1)};n&&n.addEventListener("click",(async()=>{n.disabled=!0,await l(),n.disabled=!1})),a&&a.addEventListener("click",(async()=>{a.disabled=!0,await o(),a.disabled=!1})),null===window.ontouchstart&&function(t,s,e){const n=50;let a,l,o;const c=t.getElementsByClassName(i)[0];c.addEventListener("touchstart",(t=>{a=t.touches[0].pageX,l=o=null})),c.addEventListener("touchmove",(t=>{l=t.changedTouches[0].pageX,o=t.changedTouches[0].pageY})),c.addEventListener("touchend",(t=>{null!==l&&null!==o&&(l<a-n?(e(),!0===t.cancelable&&t.preventDefault()):a+n<l&&(s(),!0===t.cancelable&&t.preventDefault()))}))}(s,l,o)}const E=[];const C=[];let I=[],P=[];const x=[];function A(t,s){const e=t.querySelector(":scope > div");if(e){e.style.transitionDuration=s+"s",""===e.className&&(e.classList.add("gida-slider-show-caption"),e.classList.add("subtitle")),e.classList.contains("line")||e.classList.contains("circle")||e.classList.add("subtitle"),e.classList.contains("line")&&(e.dataset.caption="line"),e.classList.contains("circle")&&(e.dataset.caption="circle"),e.classList.contains("subtitle")&&(e.dataset.caption="subtitle");const t=e.querySelectorAll(":scope > div");for(const s of t)S(s);S(e);const i=e.querySelectorAll(":scope > span");if(0<i.length){const t=document.createElement("div");for(const s of i)t.appendChild(e.removeChild(s));e.appendChild(t)}}x.push(e)}function S(t){for(let s=0;s<t.childNodes.length;s+=1){const e=t.childNodes[s];if(3===e.nodeType){if(""===e.nodeValue.trim())continue;const t=document.createElement("span");t.appendChild(document.createTextNode(e.nodeValue)),e.parentNode.replaceChild(t,e)}}}function z(){if(window.innerWidth<600)for(const t of x)t&&(t.classList.remove(t.dataset.caption),t.classList.add("subtitle"));else for(const t of x)t&&(t.classList.remove("subtitle"),t.classList.add(t.dataset.caption))}class q{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.transform="translateX("+(t?100:0)+"%)";setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transition="transform "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.transform=s<=t?"translateX(0%)":"translateX(100%)";await L(1e3*this._time).set()}}class N{constructor(t,s,e){this._size=t,this._sls=s,this._time=e,this._curIdx=0,this._curIdxPsd=0,this._curPos=this._calcPosition(0,1);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.opacity=1,this._sls[t].style.transform=`translateX(${100*this._curPos[t]}%)`}async transition(t,s){this._curPos=this._calcPosition(this._curIdxPsd,s);for(let t=0;t<this._sls.length;t+=1)this._sls[t].style.transition="",this._sls[t].style.transform="translateX("+100*this._curPos[t]+"%)";await L(10).set();let e=0;1===s&&(e=t-this._curIdx),-1===s&&(e=this._curIdx-t),e<0&&(e+=this._size);for(let t=0;t<e;t+=1){const i=1===e?"ease":0===t?"ease-in":t===e-1?"ease-out":"linear";this._curPos=this.shift(this._curPos,s,this._time/e,i),await L(Math.floor(1e3*this._time/e)).set()}this._curIdx=t}shift(t,s,e,i="ease"){this._curIdxPsd+=s,this._sls.length-1<this._curIdxPsd&&(this._curIdxPsd=0),this._curIdxPsd<0&&(this._curIdxPsd=this._sls.length-1);const n=this._calcPosition(this._curIdxPsd,s);for(let s=0;s<this._sls.length;s+=1){const a=1===Math.abs(t[s]-n[s])?`transform ${e}s ${i}`:"";this._sls[s].style.transition=a,this._sls[s].style.transform=`translateX(${100*n[s]}%)`}return n}_calcPosition(t,s){const e=this._sls.length,i=new Array(e);i[t]=0;const n=-1!==s?Math.ceil((e-1)/2):Math.floor((e-1)/2),a=e-1-n;for(let s=1;s<=n;s+=1){let n=t+s;e-1<n&&(n-=e),i[n]=s}for(let s=1;s<=a;s+=1){let n=t-s;n<0&&(n+=e),i[n]=-s}return i}}class M{constructor(t,s,e){this._size=t,this._sls=s,this._time=e;for(let t=0;t<this._size;t+=1)this._sls[t].style.opacity=0===t?1:0;setTimeout((()=>{for(let t=0;t<this._size;t+=1)this._sls[t].style.transition="opacity "+this._time+"s"}),10)}async transition(t,s){for(let s=0;s<this._size;s+=1)this._sls[s].style.opacity=s===t?1:0,this._sls[s].style.pointerEvents=s===t?"auto":"none";await L(1e3*this._time).set()}}const T="dual",k="scroll";class B{constructor(t){const s=document.createElement("div");s.classList.add("gida-slider-show-picture"),t.classList.contains(k)&&s.classList.add(k);const e=t.querySelectorAll(":scope > img");e.length?(s.appendChild(e[0]),1<e.length&&(s.classList.add(T),s.appendChild(e[1]))):t.dataset.img&&(s.appendChild(this._createImage(t.dataset.img,t.dataset.imgSrcset??null)),t.dataset.imgSub&&(s.classList.add(T),s.appendChild(this._createImage(t.dataset.imgSub,t.dataset.imgSubSrcset??null)))),this.p=s}_createImage(t,s){const e=document.createElement("img");return e.src=t,s&&(e.srcset=s),e}getElement(){return this.p}transition(t,s){}display(t){t?this.p.classList.add(l):this.p.classList.remove(l)}getDuration(t,s,e){return e?dt*(1+.1*(1-2*Math.random())):t}}class D{constructor(t){const s=document.createElement("div");s.classList.add("gida-slider-show-video");const e=t.querySelectorAll(":scope > video");if(1===e.length){const t=e[0];this._initializeVideo(t),this.v=s.appendChild(t)}else if(t.dataset.video){const e=document.createElement("video");this._initializeVideo(e),this.v=s.appendChild(e);const i=document.createElement("source");i.setAttribute("src",t.dataset.video),e.appendChild(i)}this.p=s}_initializeVideo(t){t.muted=!0,t.playsinline=!0,t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.addEventListener("loadedmetadata",(()=>{const s=t.clientWidth/t.clientHeight;t.dataset.ar=(0|1e3*s)/1e3}))}getElement(){return this.p}transition(t,s){t&&(this.v.setAttribute("autoplay",!0),this.v.play(),1===s&&this.v.setAttribute("loop",!0))}display(t){t||(this.v.pause(),this.v.currentTime=0)}getDuration(t,s,e){return this.v.duration-s}}function X(t){if(t.dataset.video)return!0;return 0<t.querySelectorAll(":scope > video").length}!function(){"scroll"===r&&1<_&&_<5&&function(){for(let t=0;t<_;t+=1){const s=p[t],e=s.cloneNode(!0);p.push(e),s.parentNode.appendChild(e)}}();const t=c.classList.contains(k);for(const s of p){t&&s.classList.add(k),s.style.opacity=0,A(s,u);const e=X(s)?new D(s):new B(s),i=s.querySelector("a")??s;i.insertBefore(e.getElement(),i.firstChild),g.push(e)}switch(function(t,s=!1){s&&t(),v.push(function(t){let s;function e(){s=!1,t()}return()=>{s||(s=!0,requestAnimationFrame(e))}}(t))}(z,!0),r){case"slide":y=new q(_,p,u);break;case"scroll":y=new N(_,p,u);break;case"fade":y=new M(_,p,u);break;default:y=new q(_,p,u)}}(),f&&function(t,s,e,i){const n=document.createElement("div");n.classList.add("gida-slider-show-backgrounds"),s.insertBefore(n,s.firstChild);for(let s=0;s<t;s+=1){const t=e[s],a=document.createElement("div"),l=t.dataset.img??t.dataset.imgLeft;l&&(a.style.backgroundImage=`url('${l}')`,a.style.transitionDuration=2*i+"s"),n.appendChild(a),w.push(a)}}(_,c,p,u),document.addEventListener("DOMContentLoaded",(()=>{b(_,c,O),function(s){if(1!==s)for(let e=0;e<s;e+=1){const s=t+"-"+e;let i=document.querySelector('*[data-id="'+s+'"]');i||(i=document.getElementById(s)),C.push(i)}}(_),function(t,s){I=s.querySelectorAll(".gida-slider-show-slide-count"),P=s.querySelectorAll(".gida-slider-show-slide-index");for(const s of I)s.innerHTML=t;for(const t of P)t.innerHTML=1}(_,c),function(s,e,i){if(1===s)return;const n=e.getElementsByClassName("gida-slider-show-rivets")[0];if(!n)return;const a=2===s?1:0;for(let e=0;e<s;e+=1){const s=e,l=document.createElement("span");l.id=t+"-rivet-"+s,l.className="gida-slider-show-rivet",l.addEventListener("click",(()=>{i(s,a)})),n.appendChild(l),E.push(l)}}(_,c,O);new IntersectionObserver((t=>{for(const s of t)c.classList[s.isIntersecting?"add":"remove"](o)}),{rootMargin:"100px 0px"}).observe(c),O(0,0)}));let $=0,V=null,H=0;async function O(t,s){[t,s]=function(t,s){null===t?(_-1<(t=$+s)&&(t=0),t<0&&(t=_-1)):0===s&&($<t&&(s=1,$-(t-_)<t-$&&(s=-1)),t<$&&(s=-1,t+_-$<$-t&&(s=1)));return[t,s]}(t,s);const e=window.performance.now();if(!(0!==s&&e-H<1e3*u)){H=e;for(let s=0;s<p.length;s+=1)g[s].transition(s%_===t,_);!function(t,s){for(let e=0;e<s;e+=1)w[e]&&w[e].classList[e===t?"add":"remove"](a)}(t,_),function(t){for(const t of C)t&&t.classList.remove(a);C[t]&&C[t].classList.add(a)}(t),function(t){for(const s of P)s.innerHTML=t+1}(t),function(t){for(const t of E)t.classList.remove(a);E[t]&&E[t].classList.add(a)}(t),await y.transition(t,s),$=t,async function(t){for(let s=0;s<p.length;s+=1)g[s].display(s%_===t);if(function(t,s){for(let e=0;e<x.length;e+=1)x[e]&&(e%s===t?x[e].classList.add(l):x[e].classList.remove(l))}(t,_),1===_)return;const s=g[t].getDuration(d,u,h);V&&V.clear();V=L(Math.ceil(1e3*s),W),await V.set()}(t)}}async function W(){c.classList.contains(o)&&!c.classList.contains("pause")?O(null,1):L(1e3*d,W).set()}}
//# sourceMappingURL=show.min.js.map