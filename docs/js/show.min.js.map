{"version":3,"sources":["show.js"],"names":["gida_slider_show_page","id","idx","btn","document","getElementById","click","gida_slider_show_initialize","opts","NS","CLS_FRAME","CLS_SLIDES","CLS_VISIBLE","CLS_DISPLAY","CLS_VIEW","root","getElementsByClassName","undefined","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","querySelector","style","overflow","slides","Array","prototype","slice","call","querySelectorAll","size","length","pics","effect","resizeListeners","asyncTimeout","ms","fn","res","tid","set","Promise","r","setTimeout","async","clear","clearTimeout","addEventListener","opt","window","navigator","userAgent","toLowerCase","indexOf","passive","i","bgs","initButtons","transitionFn","prevBtn","nextBtn","display","prevFn","nextFn","disabled","ontouchstart","DX","stX","mvX","mvY","frame","e","touches","pageX","changedTouches","pageY","cancelable","preventDefault","_initFlick","rivets","thumbs","slideCntElms","slideIdxElms","caps","createCaption","sl","time","c","transitionDuration","className","classList","add","contains","dataset","caption","ds","d","_wrapText","ss","div","createElement","s","appendChild","removeChild","push","childNodes","cs","nodeType","nodeValue","trim","span","createTextNode","parentNode","replaceChild","onResizeCaption","innerWidth","remove","TransitionSlide","constructor","tranTime","this","_size","_sls","_time","transform","opacity","transition","[object Object]","dir","TransitionScroll","_curIdx","_curIdxPsd","_curPos","_calcPosition","shift","Math","floor","curPos","pos","t","abs","idxPsd","sizePsd","hs","ceil","rs","j","TransitionFade","pointerEvents","CLS_SCROLL","PictureImage","p","url","img","urlSub","imgSub","_insertImage","imgSubPhone","imgPhone","urlPh","src","srcset","insertBefore","firstChild","getElement","isCur","getDuration","doRandom","dt","random","PictureVideo","v","muted","playsinline","setAttribute","ar","clientWidth","clientHeight","video","play","pause","currentTime","duration","nsl","cloneNode","cloneSlides","scroll","doFirst","isRunning","run","requestAnimationFrame","throttle","onResize","initImages","bg","imgLeft","backgroundImage","initBackgrounds","it","initThumbnails","elm","innerHTML","initIndicators","initRivets","IntersectionObserver","es","isIntersecting","rootMargin","observe","curIdx","stStep","last","getIdxDir","performance","now","transitionBackgrounds","transitionThumbnails","transitionIndicators","transitionRivets","displayCaption","step"],"mappings":"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","file":"show.min.js","sourcesContent":["/**\n *\n * Gida Slider - Show (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-06-25\n *\n */\n\n\nfunction gida_slider_show_page(id, idx) {\n\tconst btn = document.getElementById(id + '-rivet-' + idx);\n\tif (btn) btn.click();\n}\n\nfunction gida_slider_show_initialize(id, opts) {\n\tconst NS          = 'gida-slider-show';\n\tconst CLS_FRAME   = NS + '-frame';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_DISPLAY = 'display';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tif (opts === undefined) opts = {};\n\tconst effectType   = opts['effect_type']           ?? 'slide';\n\tconst timeDur      = opts['duration_time']         ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']       ?? 1;  // [second]\n\tconst randomTiming = opts['is_random_timing']      ?? false;\n\tlet bgVisible      = opts['is_background_visible'] ?? true;\n\tlet sideVisible    = opts['is_side_slide_visible'] ?? false;\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t *\n\t * Common Functions (JS)\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tconst ua = window.navigator.userAgent.toLowerCase();\n\t\tconst isIe = (ua.indexOf('trident/7') !== -1);\n\t\n\t\tconst opt = (isIe === 'ie11') ? false : { passive: true };\n\t\twindow.addEventListener('resize', () => { for (let i = 0; i < resizeListeners.length; i += 1) resizeListeners[i](); }, opt);\n\t});\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t\n\t\tfunction throttle(fn) {\n\t\t\tlet isRunning;\n\t\t\tfunction run() {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn();\n\t\t\t}\n\t\t\treturn () => {\n\t\t\t\tif (isRunning) return;\n\t\t\t\tisRunning = true;\n\t\t\t\trequestAnimationFrame(run);\n\t\t\t};\n\t\t}\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t/**\n\t *\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, slides, time) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = sl.dataset.img ?? sl.dataset.imgLeft;\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage    = `url('${img}')`;\n\t\t\t\tbg.style.transitionDuration = `${time * 2}s`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tconst CLS_PREV = NS + '-prev';\n\tconst CLS_NEXT = NS + '-next';\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { prevBtn.disabled = true; await prevFn(); prevBtn.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { nextBtn.disabled = true; await nextFn(); nextBtn.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(root, prevFn, nextFn);\n\t}\n\t\n\tfunction _initFlick(root, prevFn, nextFn) {\n\t\tconst DX = 50;\n\t\tlet stX, mvX, mvY;\n\t\n\t\tconst frame = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tframe.addEventListener('touchstart', (e) => {\n\t\t\tstX = e.touches[0].pageX;\n\t\t\tmvX = mvY = null;\n\t\t});\n\t\tframe.addEventListener('touchmove', (e) => {\n\t\t\tmvX = e.changedTouches[0].pageX;\n\t\t\tmvY = e.changedTouches[0].pageY;\n\t\t});\n\t\tframe.addEventListener('touchend', (e) => {\n\t\t\tif (mvX === null || mvY === null) return;\n\t\t\tif (mvX < stX - DX) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t} else if (stX + DX < mvX) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t *\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t *\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t *\n\t * Captions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_CAP = NS + '-caption';\n\t\n\tconst caps = [];\n\t\n\tfunction createCaption(sl, time) {\n\t\tconst c = sl.querySelector(':scope > div');\n\t\tif (c) {\n\t\t\tc.style.transitionDuration = time + 's';\n\t\t\tif (c.className === '') {\n\t\t\t\tc.classList.add(CLS_CAP);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t\tif (!c.classList.contains('line') && !c.classList.contains('circle')) c.classList.add('subtitle');\n\t\t\tif (c.classList.contains('line'))     c.dataset.caption = 'line';\n\t\t\tif (c.classList.contains('circle'))   c.dataset.caption = 'circle';\n\t\t\tif (c.classList.contains('subtitle')) c.dataset.caption = 'subtitle';\n\t\n\t\t\tconst ds = c.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) _wrapText(d);\n\t\t\t_wrapText(c);\n\t\n\t\t\tconst ss = c.querySelectorAll(':scope > span');\n\t\t\tif (0 < ss.length) {\n\t\t\t\tconst div = document.createElement('div');\n\t\t\t\tfor (const s of ss) div.appendChild(c.removeChild(s));\n\t\t\t\tc.appendChild(div);\n\t\t\t}\n\t\t}\n\t\tcaps.push(c);\n\t}\n\t\n\tfunction _wrapText(c) {\n\t\tfor (let i = 0; i < c.childNodes.length; i += 1) {\n\t\t\tconst cs = c.childNodes[i];\n\t\t\tif (cs.nodeType === 3/*TEXT_NODE*/) {\n\t\t\t\tif (cs.nodeValue.trim() === '') continue;\n\t\t\t\tconst span = document.createElement('span');\n\t\t\t\tspan.appendChild(document.createTextNode(cs.nodeValue));\n\t\t\t\tcs.parentNode.replaceChild(span, cs);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction onResizeCaption() {\n\t\tif (window.innerWidth < 600) {\n\t\t\tfor (const c of caps) {\n\t\t\t\tc.classList.remove(c.dataset.caption);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const c of caps) {\n\t\t\t\tc.classList.remove('subtitle');\n\t\t\t\tc.classList.add(c.dataset.caption);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction displayCaption(idx, size) {\n\t\tfor (let i = 0; i < caps.length; i += 1) {\n\t\t\tif (!caps[i]) continue;\n\t\t\tif ((i % size) === idx) caps[i].classList.add(CLS_DISPLAY);\n\t\t\telse caps[i].classList.remove(CLS_DISPLAY);\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size      = size;\n\t\t\tthis._sls       = slides;\n\t\t\tthis._time      = tranTime;\n\t\t\tthis._curIdx    = 0;\n\t\t\tthis._curIdxPsd = 0;\n\t\t\tthis._curPos    = this._calcPosition(0, 1);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${this._curPos[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._curPos = this._calcPosition(this._curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = 'translateX(' + 100 * this._curPos[i] + '%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(10).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - this._curIdx;\n\t\t\tif (dir === -1) d = this._curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\tthis._curPos = this.shift(this._curPos, dir, this._time / d);\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\tthis._curIdx = idx;\n\t\t}\n\t\n\t\tshift(curPos, dir, time) {\n\t\t\tthis._curIdxPsd += dir;\n\t\t\tif (this._sls.length - 1 < this._curIdxPsd) this._curIdxPsd = 0;\n\t\t\tif (this._curIdxPsd < 0) this._curIdxPsd = this._sls.length - 1;\n\t\n\t\t\tconst pos = this._calcPosition(this._curIdxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPos[i] - pos[i]) === 1) ? `transform ${time}s` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${100 * pos[i]}%)`;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst sizePsd = this._sls.length;\n\t\t\tconst pos = new Array(sizePsd);\n\t\t\tpos[idxPsd] = 0;\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((sizePsd - 1) / 2) : Math.floor((sizePsd - 1) / 2);\n\t\t\tconst rs = sizePsd - 1 - hs;\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (sizePsd - 1 < j) j -= sizePsd;\n\t\t\t\tpos[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += sizePsd;\n\t\t\t\tpos[j] = -i;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) {\n\t\t\t\tp.classList.add(CLS_SCROLL);\n\t\t\t}\n\t\t\tconst url    = sl.dataset.img;\n\t\t\tconst urlSub = sl.dataset.imgSub;\n\t\t\tif (url && urlSub) {\n\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\tthis._insertImage(p, urlSub, sl.dataset.imgSubPhone ?? null);\n\t\t\t\tthis._insertImage(p, url, sl.dataset.imgPhone ?? null);\n\t\t\t} else {\n\t\t\t\tthis._insertImage(p, url, sl.dataset.imgPhone ?? null);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_insertImage(p, url, urlPh) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = url;\n\t\t\tif (urlPh) {\n\t\t\t\timg.srcset = `${url}, ${urlPh} 600w`;\n\t\t\t}\n\t\t\tp.insertBefore(img, p.firstChild);\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst v = document.createElement('video');\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tv.dataset.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t\tp.appendChild(v);\n\t\n\t\t\tconst s = document.createElement('source');\n\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\tv.appendChild(s);\n\t\t\tthis.p = p;\n\t\t\tthis.v = v;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\tif (bgVisible) initBackgrounds(size, root, slides, timeTran);\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](CLS_VIEW);\n\t\t}, { rootMargin: `${OFFSET_VIEW}px 0px` });\n\t\tio.observe(root);\n\n\t\ttransition(0, 0);\n\t});\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneSlides();\n\t\t}\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tcreateCaption(sl, timeTran);\n\t\t\tconst p = sl.dataset.video ? new PictureVideo(sl) : new PictureImage(sl);\n\t\t\tconst e = sl.querySelector('a') ?? sl;\n\t\t\te.insertBefore(p.getElement(), e.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tonResize(onResizeCaption, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction cloneSlides() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst nsl = sl.cloneNode(true);\n\t\t\tslides.push(nsl);\n\t\t\tsl.parentNode.appendChild(nsl);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx = 0;\n\tlet stStep = null;\n\tlet last   = 0;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) return;\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tdisplayCaption(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n}\n"]}