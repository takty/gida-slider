{"version":3,"sources":["show.js"],"names":["window","GIDA","slider_show","id","opts","NS","CLS_FRAME","CLS_SLIDES","CLS_VISIBLE","CLS_DISPLAY","CLS_VIEW","CLS_PAUSE","OFFSET_VIEW","root","document","getElementById","getElementsByClassName","undefined","effectType","timeDur","timeTran","randomTiming","bgVisible","sideVisible","ss","querySelector","style","overflow","slides","Array","prototype","slice","call","querySelectorAll","size","length","pics","effect","onTransitionEnd","hasVideo","resizeListeners","onResize","fn","doFirst","push","throttle","addEventListener","l","passive","isRunning","run","requestAnimationFrame","asyncTimeout","ms","tid","res","set","Promise","r","setTimeout","clear","clearTimeout","CLS_BGS","bgs","initBackgrounds","time","frame","createElement","classList","add","insertBefore","firstChild","i","sl","bg","img","dataset","imgLeft","backgroundImage","transitionDuration","appendChild","transitionBackgrounds","idx","CLS_PREV","CLS_NEXT","initButtons","transitionFn","prevBtn","nextBtn","display","prevFn","nextFn","disabled","ontouchstart","_initFlick","DX","stX","mvX","mvY","e","touches","pageX","changedTouches","pageY","cancelable","preventDefault","CLS_RIVETS","CLS_RIVET","rivets","initRivets","rs","dir","className","transitionRivets","remove","thumbs","initThumbnails","it","transitionThumbnails","t","CLS_SLIDE_CNT","CLS_SLIDE_IDX","slideCntElms","slideIdxElms","initIndicators","elm","innerHTML","transitionIndicators","CLS_CAP","caps","createCaption","c","contains","caption","ds","d","_wrapText","div","s","removeChild","childNodes","cs","nodeType","nodeValue","trim","span","createTextNode","parentNode","replaceChild","onResizeCaption","innerWidth","displayCaption","TransitionSlide","constructor","tranTime","_size","_sls","_time","transform","opacity","transition","TransitionScroll","_curIdx","_curIdxPsd","_curPos","_calcPosition","tf","shift","Math","floor","curPos","pos","abs","idxPsd","sizePsd","hs","ceil","j","TransitionFade","pointerEvents","CLS_PIC","CLS_DUAL","CLS_SCROLL","RANDOM_RATE","PictureImage","p","imgs","_createImage","imgSrcset","imgSub","imgSubSrcset","src","srcset","getElement","isCur","getDuration","doRandom","dt","random","CLS_VIDEO","PictureVideo","vs","v","_initializeVideo","video","setAttribute","muted","playsinline","ar","clientWidth","clientHeight","play","pause","currentTime","duration","arFrame","initImages","io","IntersectionObserver","es","isIntersecting","rootMargin","observe","tryResizeVideo","finish","onResizeVideo","cloneSlides","scroll","isVideo","nsl","cloneNode","curIdx","stStep","last","getIdxDir","performance","now","step","next","previous","slider_show_page","btn","click"],"mappings":"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","sourcesContent":["/**\n *\n * Gida Slider - Show (JS)\n *\n * @author Takuto Yanagida\n * @version 2021-07-05\n *\n */\n\n\nwindow.GIDA = window['GIDA'] ?? {};\n\n\nwindow.GIDA.slider_show = function (id, opts) {\n\tconst NS          = 'gida-slider-show';\n\tconst CLS_FRAME   = NS + '-frame';\n\tconst CLS_SLIDES  = NS + '-slides';\n\tconst CLS_VISIBLE = 'visible';\n\tconst CLS_DISPLAY = 'display';\n\tconst CLS_VIEW    = 'view';\n\tconst CLS_PAUSE   = 'pause';\n\tconst OFFSET_VIEW = 100;\n\n\tconst root = id ? document.getElementById(id) : document.getElementsByClassName(NS)[0];\n\tif (!root) return;\n\n\tif (opts === undefined) opts = {};\n\tconst effectType   = opts['effect_type']           ?? 'slide';\n\tconst timeDur      = opts['duration_time']         ?? 8;  // [second]\n\tconst timeTran     = opts['transition_time']       ?? 1;  // [second]\n\tconst randomTiming = opts['is_random_timing']      ?? false;\n\tlet bgVisible      = opts['is_background_visible'] ?? true;\n\tlet sideVisible    = opts['is_side_slide_visible'] ?? false;\n\n\tif (effectType !== 'scroll') sideVisible = false;\n\tif (sideVisible) {\n\t\tbgVisible = false;\n\t\tconst ss = root.querySelector('.' + CLS_SLIDES);\n\t\tss.style.overflow = 'visible';\n\t}\n\n\tconst slides = Array.prototype.slice.call(root.querySelectorAll(`.${CLS_SLIDES} > li`));\n\tconst size   = slides.length;\n\tconst pics   = [];\n\tlet effect   = null;\n\n\tlet onTransitionEnd = null;\n\tlet hasVideo        = false;\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t/**\n\t *\n\t * Common Functions (JS)\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-30\n\t *\n\t */\n\t\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => { for (const l of resizeListeners) l(); }, { passive: true });\n\t});\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\t\n\tfunction asyncTimeout(ms, fn = () => { }) {\n\t\tlet tid = null;\n\t\tlet res;\n\t\treturn {\n\t\t\tset: () => new Promise((r) => {\n\t\t\t\tres = r\n\t\t\t\ttid = setTimeout(async () => {\n\t\t\t\t\ttid = null;\n\t\t\t\t\tawait fn();\n\t\t\t\t\tr();\n\t\t\t\t}, ms);\n\t\t\t}),\n\t\t\tclear: () => {\n\t\t\t\tif (tid) {\n\t\t\t\t\tclearTimeout(tid);\n\t\t\t\t\ttid = null;\n\t\t\t\t\tres();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\t\n\t/**\n\t *\n\t * Backgrounds\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_BGS = NS + '-backgrounds';\n\t\n\tconst bgs = [];\n\t\n\tfunction initBackgrounds(size, root, slides, time) {\n\t\tconst frame = document.createElement('div');\n\t\tframe.classList.add(CLS_BGS);\n\t\troot.insertBefore(frame, root.firstChild);\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst bg  = document.createElement('div');\n\t\t\tconst img = sl.dataset.img ?? sl.dataset.imgLeft;\n\t\t\tif (img) {\n\t\t\t\tbg.style.backgroundImage    = `url('${img}')`;\n\t\t\t\tbg.style.transitionDuration = `${time * 2}s`;\n\t\t\t}\n\t\t\tframe.appendChild(bg);\n\t\t\tbgs.push(bg);\n\t\t}\n\t}\n\t\n\tfunction transitionBackgrounds(idx, size) {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tif (!bgs[i]) continue;\n\t\t\tbgs[i].classList[i === idx ? 'add' : 'remove'](CLS_VISIBLE);\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Buttons\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tconst CLS_PREV = NS + '-prev';\n\tconst CLS_NEXT = NS + '-next';\n\t\n\tfunction initButtons(size, root, transitionFn) {\n\t\tconst prevBtn = root.getElementsByClassName(CLS_PREV)[0];\n\t\tconst nextBtn = root.getElementsByClassName(CLS_NEXT)[0];\n\t\tif (size === 1) {\n\t\t\tif (prevBtn) prevBtn.style.display = 'none';\n\t\t\tif (nextBtn) nextBtn.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\t\tconst prevFn = async () => { await transitionFn(null, -1); };\n\t\tconst nextFn = async () => { await transitionFn(null,  1); };\n\t\tif (prevBtn) prevBtn.addEventListener('click', async () => { prevBtn.disabled = true; await prevFn(); prevBtn.disabled = false; });\n\t\tif (nextBtn) nextBtn.addEventListener('click', async () => { nextBtn.disabled = true; await nextFn(); nextBtn.disabled = false; });\n\t\tif (window.ontouchstart === null) _initFlick(root, prevFn, nextFn);\n\t}\n\t\n\tfunction _initFlick(root, prevFn, nextFn) {\n\t\tconst DX = 50;\n\t\tlet stX, mvX, mvY;\n\t\n\t\tconst frame = root.getElementsByClassName(CLS_FRAME)[0];\n\t\tframe.addEventListener('touchstart', (e) => {\n\t\t\tstX = e.touches[0].pageX;\n\t\t\tmvX = mvY = null;\n\t\t});\n\t\tframe.addEventListener('touchmove', (e) => {\n\t\t\tmvX = e.changedTouches[0].pageX;\n\t\t\tmvY = e.changedTouches[0].pageY;\n\t\t});\n\t\tframe.addEventListener('touchend', (e) => {\n\t\t\tif (mvX === null || mvY === null) return;\n\t\t\tif (mvX < stX - DX) {  // <-\n\t\t\t\tnextFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t} else if (stX + DX < mvX) {  // ->\n\t\t\t\tprevFn();\n\t\t\t\tif (e.cancelable === true) e.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\t\n\t/**\n\t *\n\t * Rivets\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst CLS_RIVETS = NS + '-rivets';\n\tconst CLS_RIVET  = NS + '-rivet';\n\t\n\tconst rivets = [];\n\t\n\tfunction initRivets(size, root, transitionFn) {\n\t\tif (size === 1) return;\n\t\tconst rs = root.getElementsByClassName(CLS_RIVETS)[0];\n\t\tif (!rs) return;\n\t\tconst dir = size === 2 ? 1 : 0;\n\t\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst idx = i;\n\t\t\tconst r = document.createElement('span');\n\t\t\tr.id = id + '-rivet-' + idx;\n\t\t\tr.className = CLS_RIVET;\n\t\t\tr.addEventListener('click', () => { transitionFn(idx, dir); });\n\t\t\trs.appendChild(r);\n\t\t\trivets.push(r);\n\t\t}\n\t}\n\t\n\tfunction transitionRivets(idx) {\n\t\tfor (const r of rivets) r.classList.remove(CLS_VISIBLE);\n\t\tif (rivets[idx]) rivets[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Thumbnails\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-24\n\t *\n\t */\n\t\n\t\n\tconst thumbs = [];\n\t\n\tfunction initThumbnails(size) {\n\t\tif (size === 1) return;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst tid = id + '-' + i;\n\t\t\tlet it = document.querySelector('*[data-id=\"' + tid + '\"]');\n\t\t\tif (!it) it = document.getElementById(tid);\n\t\t\tthumbs.push(it);\n\t\t}\n\t}\n\t\n\tfunction transitionThumbnails(idx) {\n\t\tfor (const t of thumbs) {\n\t\t\tif (t) t.classList.remove(CLS_VISIBLE);\n\t\t}\n\t\tif (thumbs[idx]) thumbs[idx].classList.add(CLS_VISIBLE);\n\t}\n\t\n\t/**\n\t *\n\t * Indicators\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-23\n\t *\n\t */\n\t\n\t\n\tconst CLS_SLIDE_CNT = NS + '-slide-count';\n\tconst CLS_SLIDE_IDX = NS + '-slide-index';\n\t\n\tlet slideCntElms = [];\n\tlet slideIdxElms = [];\n\t\n\tfunction initIndicators(size, root) {\n\t\tslideCntElms = root.querySelectorAll('.' + CLS_SLIDE_CNT);\n\t\tslideIdxElms = root.querySelectorAll('.' + CLS_SLIDE_IDX);\n\t\tfor (const elm of slideCntElms) elm.innerHTML = size;\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = 1;\n\t}\n\t\n\tfunction transitionIndicators(idx) {\n\t\tfor (const elm of slideIdxElms) elm.innerHTML = (idx + 1);\n\t}\n\t\n\t/**\n\t *\n\t * Captions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-28\n\t *\n\t */\n\t\n\t\n\tconst CLS_CAP = NS + '-caption';\n\t\n\tconst caps = [];\n\t\n\tfunction createCaption(sl, time) {\n\t\tconst c = sl.querySelector(':scope > div');\n\t\tif (c) {\n\t\t\tc.style.transitionDuration = time + 's';\n\t\t\tif (c.className === '') {\n\t\t\t\tc.classList.add(CLS_CAP);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t\tif (!c.classList.contains('line') && !c.classList.contains('circle')) c.classList.add('subtitle');\n\t\t\tif (c.classList.contains('line'))     c.dataset.caption = 'line';\n\t\t\tif (c.classList.contains('circle'))   c.dataset.caption = 'circle';\n\t\t\tif (c.classList.contains('subtitle')) c.dataset.caption = 'subtitle';\n\t\n\t\t\tconst ds = c.querySelectorAll(':scope > div');\n\t\t\tfor (const d of ds) _wrapText(d);\n\t\t\t_wrapText(c);\n\t\n\t\t\tconst ss = c.querySelectorAll(':scope > span');\n\t\t\tif (0 < ss.length) {\n\t\t\t\tconst div = document.createElement('div');\n\t\t\t\tfor (const s of ss) div.appendChild(c.removeChild(s));\n\t\t\t\tc.appendChild(div);\n\t\t\t}\n\t\t}\n\t\tcaps.push(c);\n\t}\n\t\n\tfunction _wrapText(c) {\n\t\tfor (let i = 0; i < c.childNodes.length; i += 1) {\n\t\t\tconst cs = c.childNodes[i];\n\t\t\tif (cs.nodeType === 3/*TEXT_NODE*/) {\n\t\t\t\tif (cs.nodeValue.trim() === '') continue;\n\t\t\t\tconst span = document.createElement('span');\n\t\t\t\tspan.appendChild(document.createTextNode(cs.nodeValue));\n\t\t\t\tcs.parentNode.replaceChild(span, cs);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction onResizeCaption() {\n\t\tif (window.innerWidth < 600) {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove(c.dataset.caption);\n\t\t\t\tc.classList.add('subtitle');\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const c of caps) {\n\t\t\t\tif (!c) continue;\n\t\t\t\tc.classList.remove('subtitle');\n\t\t\t\tc.classList.add(c.dataset.caption);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction displayCaption(idx, size) {\n\t\tfor (let i = 0; i < caps.length; i += 1) {\n\t\t\tif (!caps[i]) continue;\n\t\t\tif ((i % size) === idx) caps[i].classList.add(CLS_DISPLAY);\n\t\t\telse caps[i].classList.remove(CLS_DISPLAY);\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Slide Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionSlide {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = 'translateX(' + (i ? 100 : 0) + '%)';\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\t\tthis._sls[i].style.transition = 'transform ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.transform = (i <= idx) ? 'translateX(0%)' : 'translateX(100%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Scroll Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t *\n\t */\n\t\n\t\n\tclass TransitionScroll {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size      = size;\n\t\t\tthis._sls       = slides;\n\t\t\tthis._time      = tranTime;\n\t\t\tthis._curIdx    = 0;\n\t\t\tthis._curIdxPsd = 0;\n\t\t\tthis._curPos    = this._calcPosition(0, 1);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = 1;\n\t\t\t\tthis._sls[i].style.transform = `translateX(${this._curPos[i] * 100}%)`;\n\t\t\t}\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tthis._curPos = this._calcPosition(this._curIdxPsd, dir);\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tthis._sls[i].style.transition = '';\n\t\t\t\tthis._sls[i].style.transform  = 'translateX(' + 100 * this._curPos[i] + '%)';\n\t\t\t}\n\t\t\tawait asyncTimeout(10).set();  // Wait\n\t\n\t\t\tlet d = 0;\n\t\t\tif (dir ===  1) d = idx - this._curIdx;\n\t\t\tif (dir === -1) d = this._curIdx - idx;\n\t\t\tif (d < 0) d += this._size;\n\t\n\t\t\tfor (let i = 0; i < d; i += 1) {\n\t\t\t\tconst tf = (d === 1) ? 'ease' : ((i === 0) ? 'ease-in' : ((i === d - 1) ? 'ease-out' : 'linear'));\n\t\t\t\tthis._curPos = this.shift(this._curPos, dir, this._time / d, tf);\n\t\t\t\tawait asyncTimeout(Math.floor(this._time * 1000 / d)).set();\n\t\t\t}\n\t\t\tthis._curIdx = idx;\n\t\t}\n\t\n\t\tshift(curPos, dir, time, tf = 'ease') {\n\t\t\tthis._curIdxPsd += dir;\n\t\t\tif (this._sls.length - 1 < this._curIdxPsd) this._curIdxPsd = 0;\n\t\t\tif (this._curIdxPsd < 0) this._curIdxPsd = this._sls.length - 1;\n\t\n\t\t\tconst pos = this._calcPosition(this._curIdxPsd, dir);\n\t\n\t\t\tfor (let i = 0; i < this._sls.length; i += 1) {\n\t\t\t\tconst t = (Math.abs(curPos[i] - pos[i]) === 1) ? `transform ${time}s ${tf}` : '';\n\t\t\t\tthis._sls[i].style.transition = t;\n\t\t\t\tthis._sls[i].style.transform  = `translateX(${100 * pos[i]}%)`;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t\t_calcPosition(idxPsd, dir) {\n\t\t\tconst sizePsd = this._sls.length;\n\t\t\tconst pos = new Array(sizePsd);\n\t\t\tpos[idxPsd] = 0;\n\t\t\tconst hs = (dir !== -1) ? Math.ceil((sizePsd - 1) / 2) : Math.floor((sizePsd - 1) / 2);\n\t\t\tconst rs = sizePsd - 1 - hs;\n\t\t\tfor (let i = 1; i <= hs; i += 1) {\n\t\t\t\tlet j = idxPsd + i;\n\t\t\t\tif (sizePsd - 1 < j) j -= sizePsd;\n\t\t\t\tpos[j] = i;\n\t\t\t}\n\t\t\tfor (let i = 1; i <= rs; i += 1) {\n\t\t\t\tlet j = idxPsd - i;\n\t\t\t\tif (j < 0) j += sizePsd;\n\t\t\t\tpos[j] = -i;\n\t\t\t}\n\t\t\treturn pos;\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Fade Transition\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-25\n\t *\n\t */\n\t\n\t\n\tclass TransitionFade {\n\t\n\t\tconstructor(size, slides, tranTime) {\n\t\t\tthis._size = size;\n\t\t\tthis._sls  = slides;\n\t\t\tthis._time = tranTime;\n\t\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === 0) ? 1 : 0;\n\t\t\t}\n\t\t\tsetTimeout(() => {\n\t\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\t\tthis._sls[i].style.transition = 'opacity ' + this._time + 's';\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\n\t\tasync transition(idx, dir) {\n\t\t\tfor (let i = 0; i < this._size; i += 1) {\n\t\t\t\tthis._sls[i].style.opacity = (i === idx) ? 1 : 0;\n\t\t\t\tthis._sls[i].style.pointerEvents = (i === idx) ? 'auto' : 'none';\n\t\t\t}\n\t\t\tawait asyncTimeout(this._time * 1000).set();\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Image Picture\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-28\n\t *\n\t */\n\t\n\t\n\tconst CLS_PIC    = NS + '-picture';\n\tconst CLS_DUAL   = 'dual';\n\tconst CLS_SCROLL = 'scroll';\n\t\n\tconst RANDOM_RATE = 10;\n\t\n\tclass PictureImage {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_PIC);\n\t\t\tif (sl.classList.contains(CLS_SCROLL)) p.classList.add(CLS_SCROLL);\n\t\n\t\t\tconst imgs = sl.querySelectorAll(':scope > img');\n\t\t\tif (imgs.length) {\n\t\t\t\tp.appendChild(imgs[0]);\n\t\t\t\tif (1 < imgs.length) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(imgs[1]);\n\t\t\t\t}\n\t\t\t} else if (sl.dataset.img) {\n\t\t\t\tp.appendChild(this._createImage(sl.dataset.img, sl.dataset.imgSrcset ?? null));\n\t\t\t\tif (sl.dataset.imgSub) {\n\t\t\t\t\tp.classList.add(CLS_DUAL);\n\t\t\t\t\tp.appendChild(this._createImage(sl.dataset.imgSub, sl.dataset.imgSubSrcset ?? null));\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_createImage(src, srcset) {\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.src = src;\n\t\t\tif (srcset) img.srcset = srcset;\n\t\t\treturn img;\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.p.classList.add(CLS_DISPLAY);\n\t\t\t} else {\n\t\t\t\tthis.p.classList.remove(CLS_DISPLAY);\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\tif (!doRandom) return timeDur;\n\t\t\treturn dt * (1 + 0.01 * RANDOM_RATE * (1 - Math.random() * 2));\n\t\t}\n\t\n\t}\n\t\n\t/**\n\t *\n\t * Image Video\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-06-29\n\t *\n\t */\n\t\n\t\n\tconst CLS_VIDEO = NS + '-video';\n\t\n\tclass PictureVideo {\n\t\n\t\tconstructor(sl) {\n\t\t\tconst p = document.createElement('div');\n\t\t\tp.classList.add(CLS_VIDEO);\n\t\n\t\t\tconst vs = sl.querySelectorAll(':scope > video');\n\t\t\tif (1 === vs.length) {\n\t\t\t\tconst v = vs[0];\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\t\t} else if (sl.dataset.video) {\n\t\t\t\tconst v = document.createElement('video');\n\t\t\t\tthis._initializeVideo(v);\n\t\t\t\tthis.v = p.appendChild(v);\n\t\n\t\t\t\tconst s = document.createElement('source');\n\t\t\t\ts.setAttribute('src', sl.dataset.video);\n\t\t\t\tv.appendChild(s);\n\t\t\t}\n\t\t\tthis.p = p;\n\t\t}\n\t\n\t\t_initializeVideo(v) {\n\t\t\tv.muted = true;\n\t\t\tv.playsinline = true;\n\t\t\tv.setAttribute('muted', true);\n\t\t\tv.setAttribute('playsinline', true);\n\t\t\tv.addEventListener('loadedmetadata', () => {\n\t\t\t\tconst ar = v.clientWidth / v.clientHeight;\n\t\t\t\tthis.ar = (0 | (ar * 1000)) / 1000;\n\t\t\t});\n\t\t}\n\t\n\t\tgetElement() {\n\t\t\treturn this.p;\n\t\t}\n\t\n\t\ttransition(isCur, size) {\n\t\t\tif (isCur) {\n\t\t\t\tthis.v.setAttribute('autoplay', true);\n\t\t\t\tthis.v.play();\n\t\t\t\tif (size === 1) this.v.setAttribute('loop', true);\n\t\t\t}\n\t\t}\n\t\n\t\tdisplay(isCur) {\n\t\t\tif (!isCur) {\n\t\t\t\tthis.v.pause();\n\t\t\t\tthis.v.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\n\t\tgetDuration(timeDur, timeTran, doRandom) {\n\t\t\treturn this.v.duration - timeTran;\n\t\t}\n\t\n\t\tonResize() {\n\t\t\tif (!this.ar) return false;\n\t\t\tconst arFrame = this.p.clientWidth / this.p.clientHeight;\n\t\t\tif (this.ar < arFrame) {\n\t\t\t\tthis.v.classList.remove('height');\n\t\t\t\tthis.v.classList.add('width');\n\t\t\t} else {\n\t\t\t\tthis.v.classList.remove('width');\n\t\t\t\tthis.v.classList.add('height');\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\n\t}\n\t\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tinitImages();\n\tif (bgVisible) initBackgrounds(size, root, slides, timeTran);\n\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\tinitButtons(size, root, transition);\n\t\tinitThumbnails(size);\n\t\tinitIndicators(size, root);\n\t\tinitRivets(size, root, transition);\n\n\t\tconst io = new IntersectionObserver((es) => {\n\t\t\tfor (const e of es) root.classList[e.isIntersecting ? 'add' : 'remove'](CLS_VIEW);\n\t\t}, { rootMargin: `${OFFSET_VIEW}px 0px` });\n\t\tio.observe(root);\n\n\t\ttransition(0, 0);\n\t});\n\tif (hasVideo) setTimeout(tryResizeVideo, 100);\n\tfunction tryResizeVideo() {\n\t\tconst finish = onResizeVideo();\n\t\tif (!finish) setTimeout(tryResizeVideo, 100);\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tfunction initImages() {\n\t\tif (effectType === 'scroll' && 1 < size && size < 5) {\n\t\t\tcloneSlides();\n\t\t}\n\t\tconst scroll = root.classList.contains(CLS_SCROLL);\n\t\tfor (const sl of slides) {\n\t\t\tif (scroll) sl.classList.add(CLS_SCROLL);\n\n\t\t\tsl.style.opacity = 0;  // for avoiding flickering slides on page loading\n\t\t\tcreateCaption(sl, timeTran);\n\t\t\tlet p = null;\n\t\t\tif (isVideo(sl)) {\n\t\t\t\tp = new PictureVideo(sl);\n\t\t\t\thasVideo = true;\n\t\t\t} else {\n\t\t\t\tp = new PictureImage(sl);\n\t\t\t}\n\t\t\tsl.insertBefore(p.getElement(), sl.firstChild);\n\t\t\tconst e = sl.querySelector('a') ?? sl;\n\t\t\te.insertBefore(p.getElement(), e.firstChild);\n\t\t\tpics.push(p);\n\t\t}\n\t\tif (hasVideo) onResize(onResizeVideo);\n\t\tonResize(onResizeCaption, true);\n\t\tswitch (effectType) {\n\t\t\tcase 'slide' : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t\tcase 'scroll': effect = new TransitionScroll(size, slides, timeTran); break;\n\t\t\tcase 'fade'  : effect = new TransitionFade(size, slides, timeTran); break;\n\t\t\tdefault      : effect = new TransitionSlide(size, slides, timeTran); break;\n\t\t}\n\t}\n\n\tfunction isVideo(sl) {\n\t\tif (sl.dataset.video) return true;\n\t\tconst vs = sl.querySelectorAll(':scope > video');\n\t\treturn 0 < vs.length;\n\t}\n\n\tfunction onResizeVideo() {\n\t\tlet finish = true;\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst p = pics[i];\n\t\t\tif (p instanceof PictureVideo) {\n\t\t\t\tif (!p.onResize()) finish = false;\n\t\t\t}\n\t\t}\n\t\treturn finish;\n\t}\n\n\tfunction cloneSlides() {\n\t\tfor (let i = 0; i < size; i += 1) {\n\t\t\tconst sl  = slides[i];\n\t\t\tconst nsl = sl.cloneNode(true);\n\t\t\tslides.push(nsl);\n\t\t\tsl.parentNode.appendChild(nsl);\n\t\t}\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tlet curIdx = 0;\n\tlet stStep = null;\n\tlet last   = 0;\n\n\tasync function transition(idx, dir) {\n\t\t[idx, dir] = getIdxDir(idx, dir);\n\n\t\tconst t = window.performance.now();\n\t\tif (dir !== 0 && t - last < timeTran * 1000) return;\n\t\tlast = t;\n\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].transition((i % size) === idx, size);\n\t\t}\n\t\ttransitionBackgrounds(idx, size);\n\t\ttransitionThumbnails(idx);\n\t\ttransitionIndicators(idx);\n\t\ttransitionRivets(idx);\n\n\t\tawait effect.transition(idx, dir);\n\t\tif (onTransitionEnd) onTransitionEnd();\n\t\tcurIdx = idx;\n\t\tdisplay(idx);\n\t}\n\n\tasync function display(idx) {\n\t\tfor (let i = 0; i < slides.length; i += 1) {\n\t\t\tpics[i].display((i % size) === idx);\n\t\t}\n\t\tdisplayCaption(idx, size);\n\t\tif (size === 1) return;\n\n\t\tconst dt = pics[idx].getDuration(timeDur, timeTran, randomTiming);\n\t\tif (stStep) stStep.clear();\n\t\tstStep = asyncTimeout(Math.ceil(dt * 1000), step);\n\t\tawait stStep.set();\n\t}\n\n\tasync function step() {\n\t\tif (root.classList.contains(CLS_VIEW) && !root.classList.contains(CLS_PAUSE)) {\n\t\t\ttransition(null, 1);\n\t\t} else {\n\t\t\tasyncTimeout(timeDur * 1000, step).set();\n\t\t}\n\t}\n\n\tfunction getIdxDir(idx, dir) {\n\t\tif (idx === null) {\n\t\t\tidx = curIdx + dir;\n\t\t\tif (size - 1 < idx) idx = 0;\n\t\t\tif (idx < 0) idx = size - 1;\n\t\t} else if (dir === 0) {\n\t\t\tif (curIdx < idx) {\n\t\t\t\tdir = 1;\n\t\t\t\tif ((curIdx - (idx - size)) < (idx - curIdx)) dir = -1;\n\t\t\t}\n\t\t\tif (idx < curIdx) {\n\t\t\t\tdir = -1;\n\t\t\t\tif (((idx + size) - curIdx) < (curIdx - idx)) dir = 1;\n\t\t\t}\n\t\t}\n\t\treturn [idx, dir];\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\treturn {\n\t\tnext           : () => { transition((curIdx === size - 1) ? 0   : (curIdx + 1),  1); },\n\t\tprevious       : () => { transition((curIdx === 0) ? (size - 1) : (curIdx - 1), -1); },\n\t\tonTransitionEnd: (fn) => { onTransitionEnd = fn; }\n\t};\n\n}\n\nwindow.GIDA.slider_show_page = function (id, idx) {\n\tconst btn = document.getElementById(id + '-rivet-' + idx);\n\tif (btn) btn.click();\n}\n"],"file":"show.min.js"}